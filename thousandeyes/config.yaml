name: "ThousandEyes Enterprise Agent"
description: "Run ThousandEyes Enterprise Agent for network monitoring and testing"
version: "1.0.0"
slug: "thousandeyes_agent"
init: false
arch:
  - aarch64
  - amd64
  - armhf
  - armv7
  - i386
startup: services
# Required capabilities for ThousandEyes agent
host_network: false
privileged: false
# ThousandEyes requires NET_ADMIN and SYS_ADMIN capabilities
apparmor: false
# Persistent data volumes
map:
  - config:rw
  - data:rw
# Configuration options
options:
  # Essential settings
  account_token: ""
  agent_hostname: ""
  inet_mode: "ipv4"
  
  # Resource limits
  memory_limit: "2048"
  cpu_shares: "1024"
  
  # Logging
  log_level: "INFO"
  log_file_size: "10"
  
  # Proxy settings (disabled by default)
  proxy_enabled: false
  proxy_type: "HTTP"
  proxy_host: ""
  proxy_port: 3128
  proxy_user: ""
  proxy_pass: ""
  proxy_bypass_list: ""
  
  # Custom DNS (disabled by default)
  custom_dns_enabled: false
  custom_dns_servers: []
  
  # Security options
  browserbot_enabled: true
  accept_self_signed_certs: false
  
  # Advanced options
  crash_reports: true
  auto_update: true
  
  # Volume paths (auto by default)
  use_custom_paths: false
  custom_lib_path: "/data/te-agent-lib"
  custom_log_path: "/data/te-agent-logs"

schema:
  # Essential settings
  account_token: "password"
  agent_hostname: "str?"
  inet_mode: "list(ipv4|ipv6|dual)?"
  
  # Resource limits
  memory_limit: "str?"
  cpu_shares: "str?"
  
  # Logging
  log_level: "list(DEBUG|INFO|WARNING|ERROR)?"
  log_file_size: "str?"
  
  # Proxy settings
  proxy_enabled: "bool"
  proxy_type: "list(HTTP|HTTPS|SOCKS5)?"
  proxy_host: "str?"
  proxy_port: "int?"
  proxy_user: "str?"
  proxy_pass: "password?"
  proxy_bypass_list: "str?"
  
  # Custom DNS
  custom_dns_enabled: "bool"
  custom_dns_servers:
    - "str"
  
  # Security options
  browserbot_enabled: "bool?"
  accept_self_signed_certs: "bool?"
  
  # Advanced options
  crash_reports: "bool?"
  auto_update: "bool?"
  
  # Volume paths
  use_custom_paths: "bool"
  custom_lib_path: "str?"
  custom_log_path: "str?"

# Port mappings - ThousandEyes uses various ports for tests
# ports:
#   49152:49153/tcp: null
#   49152:49153/udp: null

