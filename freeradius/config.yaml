name: "FreeRADIUS Server"
description: "FreeRADIUS server with RadSec support for Meraki WPN Portal"
version: "2.0.2"
slug: "freeradius-server"
# Pre-built image from GitHub Container Registry (built by CI/CD)
# Remove this line to build locally from Dockerfile
image: "ghcr.io/liptonj/freeradius-server-{arch}"
arch:
  - amd64
url: "https://github.com/liptonj/hassio-addons"
init: false
startup: services
ports:
  1812/udp: 1812
  1813/udp: 1813
  2083/tcp: 2083
  3799/udp: 3799
  8000/tcp: null
  80/tcp: null
ports_description:
  1812/udp: "RADIUS Authentication"
  1813/udp: "RADIUS Accounting"
  2083/tcp: "RadSec (RADIUS over TLS)"
  3799/udp: "CoA/DM (Change of Authorization)"
  8000/tcp: "Configuration API (internal only, not exposed by default)"
  80/tcp: "Let's Encrypt HTTP-01 challenge (optional, only if managing own certs)"
map:
  - config:rw
  - ssl:ro
# Services to discover (MariaDB auto-discovery)
services:
  - mysql:want
options:
  # Server Configuration
  server_name: "freeradius-server"
  max_requests: 16384
  max_request_time: 30
  cleanup_delay: 5
  max_servers: 32
  min_spare_servers: 3
  max_spare_servers: 10
  
  # RadSec Configuration
  radsec_enabled: true
  radsec_port: 2083
  
  # CoA Configuration (Change of Authorization / Disconnect)
  coa_enabled: true
  coa_port: 3799
  
  # Certificate Configuration
  # Use 'letsencrypt' for RadSec with LE certs from /ssl
  # Use 'selfsigned' to generate self-signed certificates
  cert_source: "selfsigned"
  
  # Logging
  log_level: "info"
  log_auth: true
  log_auth_badpass: true
  log_auth_goodpass: false
  
  # Database Configuration
  # Select database type and provide connection details
  # For SQLite: only db_name is used (as filename in /config/)
  # For MySQL: if MariaDB add-on is installed, credentials are auto-discovered!
  #            Just set db_type to "mysql" and leave user/password empty
  # For PostgreSQL: provide host, port, name, user, password
  db_type: "sqlite"
  db_host: ""
  db_port: 3306
  db_name: "freeradius"
  db_user: ""
  db_password: ""
  
  # Database pool settings (optional, for MySQL/PostgreSQL)
  db_pool_size: 5
  db_max_overflow: 10
  db_pool_recycle: 3600
  
  # API Configuration
  # The API is for internal management only - NOT exposed to the internet
  # Access via Home Assistant Ingress or local network only
  api_enabled: true
  api_port: 8000
  api_host: "127.0.0.1"
  # API auth token - leave empty to auto-generate secure random token on first start
  # Generated token is saved to /config/.api_auth_token and shown in logs
  api_auth_token: ""
  
  # Let's Encrypt Configuration
  # For standalone certbot, set letsencrypt_standalone to true
  # For HA Let's Encrypt addon integration, leave false and use /ssl certs
  letsencrypt_standalone: false
  letsencrypt_domain: ""
  letsencrypt_email: ""
  letsencrypt_http_port: 80
  
  # Certificate password (optional)
  cert_password: ""
  
schema:
  server_name: "str?"
  max_requests: "int(1024,65536)?"
  max_request_time: "int(10,120)?"
  cleanup_delay: "int(1,30)?"
  max_servers: "int(1,256)?"
  min_spare_servers: "int(1,32)?"
  max_spare_servers: "int(1,64)?"
  radsec_enabled: "bool?"
  radsec_port: "int(1024,65535)?"
  coa_enabled: "bool?"
  coa_port: "int(1024,65535)?"
  cert_source: "list(selfsigned|letsencrypt)?"
  log_level: "list(debug|info|warn|error)?"
  log_auth: "bool?"
  log_auth_badpass: "bool?"
  log_auth_goodpass: "bool?"
  db_type: "list(sqlite|mysql|postgresql)?"
  db_host: "str?"
  db_port: "int(1,65535)?"
  db_name: "str?"
  db_user: "str?"
  db_password: "password?"
  db_pool_size: "int(1,20)?"
  db_max_overflow: "int(0,50)?"
  db_pool_recycle: "int(300,7200)?"
  api_enabled: "bool?"
  api_port: "int(1024,65535)?"
  api_host: "str?"
  api_auth_token: "password?"
  letsencrypt_standalone: "bool?"
  letsencrypt_domain: "str?"
  letsencrypt_email: "email?"
  letsencrypt_http_port: "int(1,65535)?"
  cert_password: "password?"